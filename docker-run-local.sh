#!/bin/bash
# Requirements:
# - Set these variables here or in the env
export AWS_ACCESS_KEY_ID="ASIA5INWV2TPF5C7CNSJ"
export AWS_SECRET_ACCESS_KEY="vaMk9KvrjTJZ67i18tvOiGLdbFc+GgQT8m5ykFd5"
export AWS_SESSION_TOKEN="IQoJb3JpZ2luX2VjEAcaCWV1LXdlc3QtMSJGMEQCIHufD/y02ybw2/s8iDdtR3H0xBqR9sQh3W3scgz1Q3xBAiBLw0uDnURGeSDH+gIvugyQ7Tfzy+O2HuQwUgz79pJnRiqYAwjQ//////////8BEAIaDDkxMTQ1MzA1MDA3OCIMAHGsWvHdbeqhRNnXKuwC1tITsU87CCJO9alIB7uEcEUw1EYeHbsHVtivXzXSIfYckQIBakC2pil2OWfIBDX+X3EOheDAMT5JgOxDI4spKHuTNq60h1MKVp7oCLAe325TsiW6E9mmQSJIQTmMo93cTokH1ZyQIxCixWOqwYBjEUg4kczg+WAxedVOftZst9Cd/+1lgug5A+XWU7dVFxgnjyfjFpXIzUwatZWnnNRNlAFzqc0lpTWEaGSzhJkyTBJpl1sUpRhug63xxmdc+djJSZux0z9iR2yowt1U4U8hYxdlRQ8eUhiQ9VoT0QJGzjVpmqPsHmlbB9j5ui0LXCPgQmO/EqDKeFykCw1I6EPAHJ7S6DHbyOEtMbdOoB0IvybW56WI1aEoa8o822MXbP+czTga4IhyRdWftIAL/mIMgS0d8AqrBUYkRZseNfCr5zLi0YdWzW1aFqozLcQ0nEAVaQ4Dwk49kphjyv8vktYzUf6H3gmbX2CudD512TD2+cCnBjqnAa8YI2hLqJ/UciFzBPlPgisnB3qjd0oFSWnFobd7GGWVvPy0Na4OofClUSfiFIGACqAL5kc5CJdPdEoPPyz58Bz2Mgj8xLGFryEczf+8o2ShTD+ToPgLTIS7Ggc9Uf6UWFU8Gi3gjnGoAZ9Pj5u5hxuyo/FotwX2HP4y0mF5Oql+E27S1blB8lqqoyhwpwYCmc8ztFghJTdtQ+/3VWuDfaDwtGG5ZReT"
IMAGE_NAME="aws-prometheus-exporter"
EXPORTER_PORT="9877"
HOST_PORT="9877"

docker run \
   -e AWS_ACCESS_KEY_ID="$AWS_ACCESS_KEY_ID" \
   -e AWS_SECRET_ACCESS_KEY="$AWS_SECRET_ACCESS_KEY" \
   -e AWS_SESSION_TOKEN="$AWS_SESSION_TOKEN" \
   -p $HOST_PORT:$EXPORTER_PORT \
   $IMAGE_NAME
